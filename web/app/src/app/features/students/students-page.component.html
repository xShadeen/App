@if (actionError()) {
  <div class="error">
    {{ actionError() }}
  </div>
}

<form [formGroup]="form" (ngSubmit)="onSubmit()">
  <div>
    <label for="firstName">First name</label>
    <input #firstNameInput id="firstName" type="text" formControlName="firstName" />
    @if (form.controls.firstName.touched && form.controls.firstName.invalid) {
      <small>First name is required</small>
    }
  </div>

  <div>
    <label for="email">Email</label>
    <input id="email" type="email" formControlName="email" />
    @if (form.controls.email.touched && form.controls.email.value && form.controls.email.invalid) {
      <small>Invalid email format</small>
    }
  </div>

  <div>
    <label for="phone">Phone</label>
    <input id="phone" type="text" formControlName="phone" />
    @if (form.controls.phone.touched && form.controls.phone.invalid) {
      <small>Phone is required</small>
    }
  </div>

  <button type="submit" [disabled]="form.invalid || actionLoading()">
    @if (actionLoading()) {
      Adding...
    } @else {
      Add student
    }
  </button>
</form>

<hr />

<h1>Students</h1>

@if (error()) {
  <div class="error">
    {{ error() }}
  </div>
}

@if (loading()) {
  <div class="spinner"></div>
}

@if (!loading() && !error() && students().length === 0) {
  <p>No students yet</p>
}

@if (!loading() && students().length > 0) {
  <ul>
    @for (student of students(); track student.id) {
      <li>{{ student.firstName }}</li>
      <button (click)="onDelete(student.id)">Delete</button>
    }
  </ul>
}
